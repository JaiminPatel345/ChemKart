<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChemKart Equipment System Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #2c3e50;
            color: white;
        }
        .test-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background-color: #27ae60; }
        .error { background-color: #e74c3c; }
        .info { background-color: #3498db; }
    </style>
</head>
<body>
    <h1>ChemKart Equipment System Test</h1>
    
    <div class="test-section">
        <h2>Test Results</h2>
        <div id="test-results"></div>
    </div>

    <script>
        // Mock data for testing
        const REACTIONS_DB = {
            'H2O': { name: 'Water', inputs: ['H', 'H', 'O'], conditions: ['mixing'], level: 1, reward: 10 },
            'NH3': { name: 'Ammonia', inputs: ['N', 'H', 'H', 'H'], conditions: ['mixing', 'heat'], level: 2, reward: 25 },
            'NaCl': { name: 'Sodium Chloride', inputs: ['Na', 'Cl'], conditions: ['mixing'], level: 1, reward: 15 }
        };

        const TOOLS_DB = {
            'Flask': { name: 'Flask', type: 'tool', icon: 'ðŸ§ª', unlockLevel: 1 },
            'Bunsen Burner': { name: 'Bunsen Burner', type: 'tool', icon: 'ðŸ”¥', unlockLevel: 1 },
            'Beaker': { name: 'Beaker', type: 'tool', icon: 'âš—ï¸', unlockLevel: 2 }
        };

        function testEquipmentSystem() {
            const results = [];
            
            // Test 1: Check mixing requirement
            function testMixingRequirement() {
                const workbenchContents = {
                    elements: ['H', 'H', 'O'],
                    tools: ['Flask']
                };
                
                const reaction = REACTIONS_DB['H2O'];
                const conditionsMet = reaction.conditions.every(cond => {
                    if (cond === 'mixing') return workbenchContents.tools.includes('Flask') || workbenchContents.tools.includes('Beaker');
                    return false;
                });
                
                return conditionsMet;
            }
            
            // Test 2: Check heat requirement
            function testHeatRequirement() {
                const workbenchContents = {
                    elements: ['N', 'H', 'H', 'H'],
                    tools: ['Bunsen Burner']
                };
                
                const reaction = REACTIONS_DB['NH3'];
                const conditionsMet = reaction.conditions.every(cond => {
                    if (cond === 'heat') return workbenchContents.tools.includes('Bunsen Burner');
                    if (cond === 'mixing') return workbenchContents.tools.includes('Flask') || workbenchContents.tools.includes('Beaker');
                    return false;
                });
                
                return !conditionsMet; // Should fail because missing mixing equipment
            }
            
            // Test 3: Check both requirements
            function testBothRequirements() {
                const workbenchContents = {
                    elements: ['N', 'H', 'H', 'H'],
                    tools: ['Bunsen Burner', 'Flask']
                };
                
                const reaction = REACTIONS_DB['NH3'];
                const conditionsMet = reaction.conditions.every(cond => {
                    if (cond === 'heat') return workbenchContents.tools.includes('Bunsen Burner');
                    if (cond === 'mixing') return workbenchContents.tools.includes('Flask') || workbenchContents.tools.includes('Beaker');
                    return false;
                });
                
                return conditionsMet;
            }
            
            // Run tests
            results.push({
                name: "Mixing Requirement Test",
                result: testMixingRequirement(),
                expected: true
            });
            
            results.push({
                name: "Heat Requirement Test (should fail)",
                result: testHeatRequirement(),
                expected: false
            });
            
            results.push({
                name: "Both Requirements Test",
                result: testBothRequirements(),
                expected: true
            });
            
            return results;
        }
        
        // Display test results
        const testResults = testEquipmentSystem();
        const resultsDiv = document.getElementById('test-results');
        
        testResults.forEach(test => {
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${test.result === test.expected ? 'success' : 'error'}`;
            resultDiv.innerHTML = `
                <strong>${test.name}:</strong> 
                ${test.result === test.expected ? 'PASS' : 'FAIL'} 
                (Expected: ${test.expected}, Got: ${test.result})
            `;
            resultsDiv.appendChild(resultDiv);
        });
        
        // Add summary
        const passedTests = testResults.filter(t => t.result === t.expected).length;
        const totalTests = testResults.length;
        
        const summaryDiv = document.createElement('div');
        summaryDiv.className = `test-result info`;
        summaryDiv.innerHTML = `
            <strong>Summary:</strong> ${passedTests}/${totalTests} tests passed
        `;
        resultsDiv.appendChild(summaryDiv);
    </script>
</body>
</html> 